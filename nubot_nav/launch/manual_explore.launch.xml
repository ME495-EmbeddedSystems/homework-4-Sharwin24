<launch>

  <!-- Start the nubot simulation -->
  <include file="$(find-pkg-share nubot)/launch/simulate.launch.xml">
    <arg name="use_rviz" value="False" />
    <!-- <arg name="world" value="none" /> -->
  </include>

  <!-- Start the slam_toolbox in async mode -->
  <node name="slam_toolbox" pkg="slam_toolbox" exec="async_slam_toolbox_node" output="screen">
    <param name="use_sim_time" value="true"/>
    <!-- <param name="slam_params_file" value="$(find slam_toolbox)/param/slam_params.yaml"/> -->
  </node>

  <!-- Start the nav2 stack -->
  <include file="$(find-pkg-share nav2_bringup)/launch/bringup_launch.py">
    <arg name="use_sim_time" value="true"/>
    <arg name="slam" value="True"/>
    <arg name="autostart" value="true"/>
    <arg name="params_file" value="$(find-pkg-share nubot_nav)/nubot_nav2_params.yaml"/>
  </include>

  <!-- Start rviz -->
  <node name="rviz" pkg="rviz2" exec="rviz2" args="-d $(find-pkg-share nubot_nav)/nubot_nav_view.rviz"/>

</launch>
